function openTutorial(){TutorialSlider($(".mr-comment").sort(order)).appendTo($("html"))}function order(e,i){return getOrder(e)>=getOrder(i)?1:-1}function getOrder(e){return $(e).attr("order")?$(e).attr("order"):0}function TutorialSlider(e){var i=htmlCanvas.widget(),n=10,s=0;function d(){t(),current=$(e[s]),$("body").css({overflow:"hidden"}),window.scrollTo(0,0),$(window).height()<current.prev().offset().top+current.prev().height()&&window.scrollTo(0,current.prev().offset().top),HiddingBoxes(current,n).appendTo($("html")),CommentContainer(current,n).appendTo($("html"))}function t(){$(".mr-hidding").remove(),$(".mr-comment-container").remove()}return i.renderOn=function(i){d(),i.span("<").addClass("mr-arrow left").click(function(){!function(){0==s?s=e.length-1:s--;d()}()}),i.span(">").addClass("mr-arrow right").click(function(){!function(){s==e.length-1?s=0:s++;d()}()}),i.span("x").addClass("mr-remove").click(function(){$(".mr-arrow").remove(),$(".mr-remove").remove(),t(),$(document).unbind("scroll"),$("body").css({overflow:"visible"})})},i}function HiddingBoxes(e,i){var n=htmlCanvas.widget();return n.renderOn=function(n){var s;box=(s=e.prev(),position=s.offset(),width=s.outerWidth(),height=s.outerHeight(),box={xMin:position.left,xMax:position.left+width,yMin:position.top-$(window).scrollTop(),yMax:position.top-$(window).scrollTop()+height},box),div=n.div().addClass("mr-hidding").asJQuery(),div.css("top","0px"),div.css("left","0px"),div.css("height",box.yMin-i+"px"),div.css("width","100%"),div=n.div().addClass("mr-hidding").asJQuery(),div.css("top",box.yMin-i+"px"),div.css("left","0px"),div.css("height",box.yMax-box.yMin+2*i+"px"),div.css("width",window.innerWidth-(window.innerWidth-box.xMin)-i+"px"),div=n.div().addClass("mr-hidding").asJQuery(),div.css("top",box.yMin-i+"px"),div.css("right","0px"),div.css("height",box.yMax-box.yMin+2*i+"px"),div.css("width",window.innerWidth-(box.xMax+3*i)+"px"),div=n.div().addClass("mr-hidding").asJQuery(),div.css("top",box.yMax+i+"px"),div.css("left","0px"),div.css("height",window.innerHeight-box.yMax+"px"),div.css("width","100%")},n}function CommentContainer(e,i){var n=htmlCanvas.widget(),s=[],d=[],t=[];return n.renderOn=function(n){div=function(){div=$($(".mr-hidding")[0]);for(var e=0,i=0;i<$(".mr-hidding").length;i++)currentArea=new Number($($(".mr-hidding")[i]).css("width").split("px")[0])*new Number($($(".mr-hidding")[i]).css("height").split("px")[0]),currentArea>=e&&(e=currentArea,div=$($(".mr-hidding")[i]));return div}(),container=n.div().addClass("mr-comment-container").asJQuery(),container.css("top",new Number(div.css("top").split("px")[0])+6*i+"px"),container.css("left",new Number(div.css("left").split("px")[0])+10*i+"px"),container.css("height",new Number(div.css("height").split("px")[0])-12*i+"px"),container.css("width",new Number(div.css("width").split("px")[0])-20*i+"px"),container.appendTo($("html"));for(var r=0;r<e.children().length;r++)element=e.children()[r],$(element).is("img")?s.push($(element).clone()):$(element).is("video")?d.push($(element).clone()):t.push($(element).clone());var o=s.concat(d);if(o.length>0){if(screenshots=n.div().addClass("screenshots").asJQuery(),screenshots.appendTo(container),1==o.length)screenshots.append(o[0]);else{for(each in container.addClass("medias"),slideshow=n.div().addClass("slideshow").asJQuery(),t.length>0&&slideshow.addClass("internal"),slideshow.appendTo(screenshots),slideshow.height(container.height()-30+"px"),0==t.length&&n.div().addClass("slide-left").asJQuery().appendTo(slideshow),slideContainer=n.div().addClass("slide-container").asJQuery(),slideContainer.appendTo(slideshow),slideItems=n.div().addClass("slide-items").asJQuery(),slideItems.appendTo(slideContainer),o)item=n.div().addClass("slide-item").asJQuery(),item.append(o[each]),item.appendTo(slideItems);0==t.length?n.div().addClass("slide-right").asJQuery().appendTo(slideshow):(n.div().addClass("slide-left").asJQuery().appendTo(slideContainer),n.div().addClass("slide-right").asJQuery().appendTo(slideContainer)),n.div().addClass("bullets").asJQuery().appendTo(slideshow),slide(slideshow,3e3)}0==t.length&&screenshots.addClass("extra")}if(t.length>0){content=n.div().addClass("comments").asJQuery(),content.appendTo(container);for(r=0;r<t.length;r++)content.append(t[r])}},n}window.onresize=function(e){};